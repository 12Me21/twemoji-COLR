<!doctype html>
<meta charset=utf-8>
<title>twemoji demo</title>
<style>
	@font-face {
		font-family: 'Twemoji';
		src: url("./build/Twemoji.otf?1342346") format('opentype');
		font-display: block;
		font-weight: bold; font-weight: 100 900;
	}
	.lightbox {
		display: grid;
		grid-template-areas: "a";
	}
	.lightbox > * {
		grid-area: a;
		background: white;
	}
	.lightbox > .text {
		line-height: 1.125em;
		margin-left: -0.03125em;
	}
	.lightbox > :last-child {
		mix-blend-mode: difference;
	}
</style>
<textarea style='font-family:system-ui,Twemoji;font-size:32px;'>
test 
</textarea>

<div style='font-family: Twemoji;font-size:160px;width:1.125em;height:1.125em;' class='lightbox'>
	<div class='text' id=$text>üéá</div>
	<img id=$image style='width:1.125em;height:1.125em' src="./twemoji/assets/svg/1f387.svg" width=36 height=36>
</div>
<style>
	.list {
		display: flex;
		flex-wrap: wrap;
	}
	.list > * {
		padding: 8px;
		width: 1.1875em;
		height: 1.1875em;
	}
	.s0 .s0 { display: none; }
	.s1 .s1 { display: none; }
	.s2 .s2 { display: none; }
	.s3 .s3 { display: none; }
	.s4 .s4 { display: none; }
	.s5 .s5 { display: none; }
	.g0 .g0 { display: none; }
	.g1 .g1 { display: none; }
	.g2 .g2 { display: none; }
</style>
<script src='./data/edata.js'></script>
<form id=$controls>
	<input name=g type=range min=0 max=2 value=0>
	<input name=s type=range min=0 max=5 value=3>
</form>
The following is rendered using text:
<div id=$list class='list' style='font-family:twemoji;font-size:32px;margin:16px;'></div>
<script>
	$controls.oninput = function() {
		$list.className = `list s${$controls.s.value} g${$controls.g.value}`
	}
	$controls.oninput()
	let bases = {__proto__:null}
	let s = ""
	for (let x of EDATA) {
		if (!x.emoji)
			continue
		if (x.name && x.name.startsWith('family:'))
			continue
		//let elem = document.createElement('div')
		let elem
		if (x.variant) {
			elem = (bases[x.variant[0]] ??= document.createElement('div'))
		} else
			elem = document.createElement('div')
		elem.className = 'item'
		let cls = []
		if (x.variant) {
			let v = x.variant[1]
			if (v.gender != undefined) {
				cls.push(...[0,1,2].filter(x=>x!=v.gender).map(x=>"g"+x))
				//continue
			}
			if (v.skin != undefined) {
				cls.push(...[0,1,2,3,4,5].filter(x=>x!=v.skin).map(x=>"s"+x))
				///continue
			}
		}
		let span = document.createElement('span')
		elem.append(span)
		span.append(x.emoji)
		span.className = cls.join(" ")
		$list.append(elem)
	}
	
	function load(ident) {
		let thing = EDATA.find(x=>x.emoji==ident)
		$text.textContent = thing.emoji
		$image.src = `./twemoji/assets/svg/${thing.file}.svg`
	}
	//load('üë∫')
	$list.onclick = function(ev) {
		if (ev.target.tagName=="SPAN") {
			load(ev.target.textContent)
		}
	}
</script>
<div style='font-family:sans-serif, twemoji'>
	abcdefg 0‚É£1234 ‚ô• hello ‚ô•Ô∏è‚ò∫ ‚òπ 	
</div>
