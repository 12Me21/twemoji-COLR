<!doctype html><meta charset=utf-8>
<title>Twemoji COLR readme</title>
<style>
	code {
		border: 1px solid gray;
		padding: 0 1px;
		border-radius: 1px;
	}
	body {
		font-family: Georgia, serif;
	}
	
	table {
		//border-top: 1px solid;
		//border-bottom: 1px solid;
		border-spacing: 0px 2px;
	}
	tr>* {
		padding: 1px 3px;
		border-right: 2px ridge;
	}
	tr>:last-child {
		border-right: none;
	}
	th {
		border-bottom: 2px ridge;
	}
</style>

<h1><i>Twemoji COLR</i></h1>
<p>

<h1>About Fonts</h1>
<aside><b>note:</b> when i say <q>font</q>, i technically mean <q>typeface</q>.&nbsp; (this distinction doesn't matter with emoji fonts anyway).</aside>
<h2>Color Fonts</h2>
<p>these days, emojis are usually rendered from a font file.&nbsp; nearly all fonts now use the <i>OpenType</i> format (commonly stored as <code>.ttf</code>/<code>.otf</code>/<code>.woff</code>/<code>.woff2</code> files), but it has several different ways of storing color glyphs:
<figure>
<table>
	<tr><th rowspan=2>common name<th rowspan=2><i>OpenType</i> tables<th rowspan=2>image type<th colspan=4>operating system / library support<th colspan=3>web browser support</tr>
	<tr><th><i>Windows</i><th><i>macOS</i><th><i>FreeType</i><th><i>GTK</i> (<i>Cairo</i>)<th><i>Chromium</i><th><i>Firefox</i><th><i>Safari</i>
	
	<tr><td><i>sbix</i><td><code>sbix</code><td>bitmap
	<td bgcolor=honeydew>yes (10)<td bgcolor=honeydew>yes (2011)<td bgcolor=honeydew>yes (2013)<td bgcolor=honeydew>yes (2013)<td bgcolor=honeydew>yes (2018)<td bgcolor=peachpuff>local only<td bgcolor=honeydew>yes (2016)
	
	<tr><td><i>CBDT</i><td><code>CBDT</code>, <code>CBLC</code><td>bitmap
	<td bgcolor=honeydew>yes (10)<td>?<td bgcolor=honeydew>yes (2013)<td bgcolor=honeydew>yes (2013)<td bgcolor=honeydew>yes (2018)<td bgcolor=peachpuff>local only<td bgcolor=pink>no
	
	<tr><td><i>COLRv0</i><td><code>COLR</code>(version 0), <code>CPAL</code><td>vector (no gradients)
	<td bgcolor=honeydew>yes (8.1)<td bgcolor=honeydew>yes<td bgcolor=honeydew>yes (2018)<td bgcolor=lemonchiffon>yes (2022)<td bgcolor=honeydew>yes (2016)<td bgcolor=honeydew>yes (2014)<td bgcolor=honeydew>yes (2018)
	
	<tr><td><i>OpenType-SVG</i><td><code>SVG&nbsp;</code>, <code>CPAL</code>?<td>vector
	<td bgcolor=honeydew>yes (10)<td bgcolor=honeydew>yes<td bgcolor=pink>no<td bgcolor=lemonchiffon>yes (2022)<td bgcolor=pink>no<td bgcolor=honeydew>yes (2014)<td bgcolor=honeydew>yes (2019)
	
	<tr><td><i>COLRv1</i><td><code>COLR</code>(version 1), <code>CPAL</code><td>vector
	<td bgcolor=honeydew>yes (10)<td>?<td bgcolor=pink>no<td bgcolor=lemonchiffon>yes (2023)<td bgcolor=lemonchiffon>yes (2022)<td bgcolor=lemonchiffon>yes (2022)<td bgcolor=pink>no
	<!-- , honeydew, lemonchiffon, peachpuff, pink -->
</table>
</figure>

<h2>Font Names</h2>
<p>the name of a font is stored within the file, separate from the filename.&nbsp; i.e: renaming the file won't do anything; you'll need to use a tool to change the strings in the <code>name</code> table.
<p>you can install multiple copies of a font under different names.
	
<h1>Using a Custom Emoji Font</h1>

<blockquote>“ok but how do i actually make an application/website use this font?”</blockquote>

<p>unfortunately, there isn't a simple answer to that.&nbsp; <!--&nbsp; it depends on the application:
<dl>
	<dt>application has a setting to choose the emoji font
	<dd>yay
	<dt>application has a list of fonts that it tries to load
	<dd>install your font as the first name in the list (often this is <code>Apple Color Emoji</code>)
	<dt>application uses the system emoji font
	<dd>override the system emoji font (by installing another font with the same name)
	<dt>application includes its own hardcoded emoji font
	<dd>(you're outta luck)
</dl>-->
most things will either use the system emoji font, or they'll have a list of fonts that they check for.&nbsp; some may have a setting to choose the emoji font, and some will use their own hardcoded emojis.

<p>basically, the process is different for each application and website and operating system, if it's possible at all.&nbsp; here are some that i'm aware of:

<h2><i>Firefox</i></h2>
<p>in <a href=about:config>about:config</a>, set <code>font.name-list.emoji</code> to <code>Twemoji COLR</code>.&nbsp; this affects <i>Firefox</i>'s UI and any website which doesn't specify its own emoji font.

<h2>Some Websites</h2>
<p>some websites specify a list of emoji fonts.&nbsp; they'll use the first one they find, and the list almost always begins with <code>Apple Color Emoji, Segoe UI Emoji, ...</code>.
<p>i.e:&nbsp; unless you are on <i>macOS</i>, i recommend installing a copy of <i>Twemoji COLR</i> with its name set to <code>Apple Color Emoji</code>.&nbsp; this affects websites such as <i>Bluesky</i>, <i>Github</i>, etc (in any browser)

<h2><i>Windows</i>, <i>macOS</i></h2>
<p>you <em>might</em> be able to replace the system emoji font by installing a copy of <i>Twemoji COLR</i> with the same name as it (<code>Segoe UI Emoji</code> on <i>Windows</i>, or <code>Apple Color Emoji</code> on <i>macOS</i>).&nbsp; this affects anything that uses the system font.
<p>however, this could cause problems.&nbsp; (for example, if an application tries to render emojis without color: <i>Segoe UI Emoji</i> contains black-and-white versions of the emojis, while <i>Twemoji COLR</i> doesn't).
	
<h2><i>Linux</i> (<i>FontConfig</i>)</h2>
<p>good luck.&nbsp; you can probably just uninstall other emoji fonts (particularly <i>Noto Color Emoji</i>) until it uses the one you want.

<h1>Related Works</h1>

<table>
	<tr><th>project<th>color format<th>emoji version<th>has black-and-white<br>fallback glyphs?</tr>
	<tr><td><a href=https://github.com/13rac1/twemoji-color-font>13rac1/twemoji-color-font</a><td>OpenType-SVG<td>15.1 (2024)<td>yes</tr>
	<tr><td><a href=https://github.com/mozilla/twemoji-colr>mozilla/twemoji-colr<td>COLRv0<td bgcolor=pink>14.0 (2022)<td>no</tr>
	<tr><td><a href=https://github.com/12Me21/twemoji-COLR>12Me21/twemoji-COLR<td>COLRv0<td>15.1 (2024)<td>no</tr>
	<tr><td><a href=https://git.sr.ht/~whynothugo/twemoji.ttf>whynothugo/twemoji.ttf<td>CBDT<td>15.1 (2024)<td>no</tr>
</table>

<p>my font was designed to replace <i>Twemoji Mozilla</i>, which hasn't been updated in a while and has some broken dependencies.
	
<p>i've also added margins and increased the size of the emojis relative to other text, to match other emoji fonts (including twitter itself).
	
<figure style="font-family:sans-serif">
	Before: <img src="./smiling.svg" width=15 height=15 style="vertical-align:-2px"><img src="./smiling.svg" width=15 height=15 style="vertical-align:-2px"><img src="./smiling.svg" width=15 height=15 style="vertical-align:-2px"><br>
After: <img src="./smiling.svg" width=18 height=18 style="vertical-align:-3px;margin:0 1px;"><img src="./smiling.svg" width=18 height=18 style="vertical-align:-3px;margin:0 1px;"><img src="./smiling.svg" width=18 height=18 style="vertical-align:-3px;margin:0 1px;">
</figure>
